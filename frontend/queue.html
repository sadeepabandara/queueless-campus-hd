<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Virtual Queue - QueueLess Campus</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <!-- Navigation Bar -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <h2>üéì QueueLess Campus</h2>
                </div>
                <ul class="nav-menu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="appointment.html">Book Appointment</a></li>
                    <li><a href="queue.html" class="active">Join Queue</a></li>
                    <li><a href="staff.html">Staff Dashboard</a></li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="container">
            <div class="page-header">
                <h1>Virtual Queue</h1>
                <p>Join a queue when no appointments are available</p>
            </div>

            <!-- Queue Status Section (Hidden until joined) -->
            <div
                id="queueStatusSection"
                class="queue-status-section"
                style="display: none"
            >
                <div class="status-card">
                    <div class="status-icon">‚è±Ô∏è</div>
                    <h2>You're in the Queue!</h2>
                    <div class="status-info">
                        <div class="info-item">
                            <span class="label">Your Position:</span>
                            <span class="value" id="queuePosition">-</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Estimated Wait:</span>
                            <span class="value" id="estimatedWait">-</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Service:</span>
                            <span class="value" id="queueService">-</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Status:</span>
                            <span class="value status-badge" id="queueStatus"
                                >Waiting</span
                            >
                        </div>
                    </div>
                    <button
                        onclick="refreshWaitTime()"
                        class="btn btn-secondary"
                        id="refreshBtn"
                    >
                        üîÑ Refresh Wait Time
                    </button>
                    <button
                        onclick="leaveQueue()"
                        class="btn btn-danger"
                        id="leaveBtn"
                    >
                        Leave Queue
                    </button>
                </div>
            </div>

            <!-- Join Queue Form -->
            <div id="joinQueueSection" class="form-container">
                <h3>Join Virtual Queue</h3>
                <p class="form-subtitle">
                    No appointments available? Join the queue and we'll notify
                    you when it's your turn!
                </p>

                <form id="queueForm" class="appointment-form">
                    <div class="form-group">
                        <label for="studentName">Student Name *</label>
                        <input
                            type="text"
                            id="studentName"
                            name="studentName"
                            required
                            placeholder="Enter your full name"
                        />
                    </div>

                    <div class="form-group">
                        <label for="serviceType">Service Type *</label>
                        <select id="serviceType" name="serviceType" required>
                            <option value="">Select a service</option>
                            <option value="Student Services">
                                Student Services
                            </option>
                            <option value="IT Support">IT Support</option>
                            <option value="Library Services">
                                Library Services
                            </option>
                            <option value="Financial Aid">Financial Aid</option>
                            <option value="Academic Advising">
                                Academic Advising
                            </option>
                            <option value="Career Counseling">
                                Career Counseling
                            </option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="contactNumber">Contact Number *</label>
                        <input
                            type="tel"
                            id="contactNumber"
                            name="contactNumber"
                            required
                            placeholder="0412 345 678"
                            pattern="[0-9]{10}|[0-9]{4} [0-9]{3} [0-9]{3}"
                        />
                        <small>Format: 0412345678 or 0412 345 678</small>
                    </div>

                    <div class="alert alert-info">
                        <strong>‚ÑπÔ∏è How it works:</strong>
                        <ul>
                            <li>Join the queue for your desired service</li>
                            <li>
                                We'll show you your position and estimated wait
                                time
                            </li>
                            <li>Average wait time is 15 minutes per person</li>
                            <li>You'll be notified when it's your turn</li>
                        </ul>
                    </div>

                    <div id="message" class="message"></div>

                    <button type="submit" class="btn btn-primary btn-large">
                        Join Queue
                    </button>
                </form>
            </div>

            <!-- Current Queue View -->
            <div class="queue-view-section">
                <div class="section-header">
                    <h2>Current Queue Status</h2>
                    <button
                        onclick="loadCurrentQueues()"
                        class="btn btn-outline"
                    >
                        üîÑ Refresh
                    </button>
                </div>

                <div class="service-tabs">
                    <button
                        class="tab-btn active"
                        onclick="filterByService('all')"
                    >
                        All Services
                    </button>
                    <button
                        class="tab-btn"
                        onclick="filterByService('Student Services')"
                    >
                        Student Services
                    </button>
                    <button
                        class="tab-btn"
                        onclick="filterByService('IT Support')"
                    >
                        IT Support
                    </button>
                    <button
                        class="tab-btn"
                        onclick="filterByService('Library Services')"
                    >
                        Library
                    </button>
                    <button
                        class="tab-btn"
                        onclick="filterByService('Financial Aid')"
                    >
                        Financial Aid
                    </button>
                </div>

                <div id="queueList" class="queue-list">
                    <!-- Queue items will be loaded here -->
                </div>

                <div id="emptyQueue" class="empty-state" style="display: none">
                    <p>No one in queue currently</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2025 QueueLess Campus. All rights reserved.</p>
        </footer>

        <script src="queue.js"></script>
    </body>
</html>
